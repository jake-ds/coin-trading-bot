# Ralph Progress Log
Started: 2026년 2월 23일 월요일 01시 08분 44초 KST
---

## Codebase Patterns
- **CostModel fees as percentages**: 0.02 means 0.02%, NOT 0.0002. Formula: `notional * (fee_pct + slippage_pct) * legs / 100`
- **DecisionStep labels**: Use Korean (e.g., '비용 분석') with category = "evaluate"/"decide"/"execute"/"skip"
- **Engine defaults**: Binance VIP0 spot: maker=0.02%, taker=0.04%, slippage=0.01%
- **Pre-existing test failures (3)**: `test_defaults`, `test_main_without_validate_runs_trading_loop`, `test_main_without_args_runs_trading_loop` — these fail on main, not caused by V5 changes
- **Test count baseline**: 2013 passing on main + 29 new CostModel tests = 2042 passing
- **Engines __init__.py**: exports must be alphabetically sorted in __all__
- **dataclass pattern**: Use `@dataclass` from stdlib for simple data holders (CostModel, DecisionStep, EngineCycleResult)

---

## 2026-02-23 - V5-001
- **Implemented**: CostModel — reusable trading cost calculator module
- **Files created**:
  - `src/bot/engines/cost_model.py` — CostModel dataclass with round_trip_cost(), net_profit(), min_spread_for_profit(), is_profitable()
  - `tests/engines/test_cost_model.py` — 29 comprehensive tests
- **Files modified**:
  - `src/bot/engines/__init__.py` — added CostModel to exports
- **Tests added**: 29
- **Learnings for future iterations:**
  - All fees are percentages (0.04 = 0.04%), division by 100 in cost calculation
  - is_maker keyword-only arg for maker/taker distinction
  - Break-even (net=0) counts as NOT profitable (strict >0 check)
---
